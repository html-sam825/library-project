<div class="signup-container">
  <div class="register-form">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Create Account</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="signupForm" (ngSubmit)="signup()">
          <mat-grid-list cols="2" rowHeight="100px" gutterSize="15px">
            <mat-grid-tile>
              <mat-form-field
                color="accent"
                appearance="outline"
                class="full-width"
              >
                <mat-label>First Name</mat-label>
                <input
                  matInput
                  formControlName="firstName"
                  placeholder="Enter your first name"
                />
                <mat-error *ngIf="firstName?.hasError('required')">
                  First name is required
                </mat-error>
                <mat-error *ngIf="firstName?.hasError('minlength')">
                  First name must be at least 2 characters
                </mat-error>
              </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile>
              <mat-form-field
                color="accent"
                appearance="outline"
                class="full-width"
              >
                <mat-label>Last Name</mat-label>
                <input
                  matInput
                  formControlName="lastName"
                  placeholder="Enter your last name"
                />
                <mat-error *ngIf="lastName?.hasError('required')">
                  Last name is required
                </mat-error>
                <mat-error *ngIf="lastName?.hasError('minlength')">
                  Last name must be at least 2 characters
                </mat-error>
              </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile colspan="2">
              <mat-form-field
                color="accent"
                appearance="outline"
                class="full-width"
              >
                <mat-label>Email</mat-label>
                <input
                  matInput
                  formControlName="email"
                  type="email"
                  placeholder="Enter your email"
                />
                <mat-icon matSuffix>email</mat-icon>
                <mat-error *ngIf="email?.hasError('required')">
                  Email is required
                </mat-error>
                <mat-error *ngIf="email?.hasError('email')">
                  Please enter a valid email address
                </mat-error>
              </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile colspan="2">
              <mat-form-field
                color="accent"
                appearance="outline"
                class="full-width"
              >
                <mat-label>Mobile Number</mat-label>
                <input
                  matInput
                  formControlName="mobileNumber"
                  placeholder="Enter 10-digit mobile number"
                />
                <mat-icon matSuffix>phone</mat-icon>
                <mat-error *ngIf="mobileNumber?.hasError('required')">
                  Mobile number is required
                </mat-error>
                <mat-error *ngIf="mobileNumber?.hasError('pattern')">
                  Please enter a valid 10-digit mobile number
                </mat-error>
              </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile colspan="2">
              <mat-form-field
                color="accent"
                appearance="outline"
                class="full-width"
              >
                <mat-label>User Type</mat-label>
                <mat-select formControlName="userType">
                  <mat-option value="STUDENT">Student</mat-option>
                  <mat-option value="ADMIN">Admin</mat-option>
                </mat-select>
                <mat-error *ngIf="userType?.hasError('required')">
                  User type is required
                </mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field
                color="accent"
                appearance="outline"
                class="full-width"
              >
                <mat-label>Password</mat-label>
                <input
                  [type]="hidePwdContent ? 'password' : 'text'"
                  matInput
                  formControlName="password"
                  placeholder="Enter password"
                />
                <button
                  mat-icon-button
                  matSuffix
                  (click)="hidePwdContent = !hidePwdContent"
                  type="button"
                  [attr.aria-label]="
                    hidePwdContent ? 'Show password' : 'Hide password'
                  "
                >
                  <mat-icon>{{
                    hidePwdContent ? "visibility_off" : "visibility"
                  }}</mat-icon>
                </button>
                <mat-hint
                  >Min. 6 characters with uppercase, lowercase &
                  number</mat-hint
                >
                <mat-error *ngIf="password?.hasError('required')">
                  Password is required
                </mat-error>
                <mat-error *ngIf="password?.hasError('minlength')">
                  Password must be at least 6 characters
                </mat-error>
                <mat-error *ngIf="password?.hasError('pattern')">
                  Password must contain uppercase, lowercase and number
                </mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field
                color="accent"
                appearance="outline"
                class="full-width"
              >
                <mat-label>Confirm Password</mat-label>
                <input
                  [type]="hidePwdContent ? 'password' : 'text'"
                  matInput
                  formControlName="confirmPassword"
                  placeholder="Confirm your password"
                />
                <button
                  mat-icon-button
                  matSuffix
                  (click)="hidePwdContent = !hidePwdContent"
                  type="button"
                  [attr.aria-label]="
                    hidePwdContent ? 'Show password' : 'Hide password'
                  "
                >
                  <mat-icon>{{
                    hidePwdContent ? "visibility_off" : "visibility"
                  }}</mat-icon>
                </button>
                <mat-error *ngIf="confirmPassword?.hasError('required')">
                  Please confirm your password
                </mat-error>
                <mat-error
                  *ngIf="confirmPassword?.hasError('passwordMismatch')"
                >
                  Passwords do not match
                </mat-error>
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>

          <mat-card-actions>
            <button
              mat-raised-button
              color="accent"
              type="submit"
              [disabled]="signupForm.invalid || isLoading"
              class="submit-button"
            >
              <mat-spinner
                diameter="20"
                *ngIf="isLoading"
                class="spinner"
              ></mat-spinner>
              {{ isLoading ? "Creating Account..." : "Register" }}
            </button>
          </mat-card-actions>
        </form>
      </mat-card-content>

      <mat-card-actions class="login-redirect">
        <h4>Already have an account?</h4>
        <a href="" mat-stroked-button color="accent" routerLink="/login"
          >Login</a
        >
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="library-info">
    <h1>Library Information</h1>
    <mat-list>
      <mat-list-item>
        <mat-icon matListIcon>info</mat-icon>
        <p>
          Once you create an account, an approval request will be sent to admin.
        </p>
      </mat-list-item>
      <mat-list-item>
        <mat-icon matListIcon>book</mat-icon>
        <p>You can have maximum 3 books ordered at a time.</p>
      </mat-list-item>
      <mat-list-item>
        <mat-icon matListIcon>schedule</mat-icon>
        <p>You can keep a book for maximum 10 days.</p>
      </mat-list-item>
      <mat-list-item>
        <mat-icon matListIcon>email</mat-icon>
        <p>Reminder emails will be sent for overdue books.</p>
      </mat-list-item>
      <mat-list-item>
        <mat-icon matListIcon>money</mat-icon>
        <p>Fine of Kshs.50  per day per book after 10 days.</p>
      </mat-list-item>
      <mat-list-item>
        <mat-icon matListIcon>block</mat-icon>
        <p>
          Account may be blocked if fine exceeds 500Rs or books are damaged.
        </p>
      </mat-list-item>
    </mat-list>
  </div>
</div>
