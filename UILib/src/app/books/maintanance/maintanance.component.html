<div class="maintenance-container">
  <!-- Add New Category Card -->
  <mat-card class="maintenance-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>category</mat-icon>
        Add New Category
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="newCategory" (ngSubmit)="addCategory()">
        <div class="form-row">
          <mat-form-field color="accent" appearance="outline">
            <mat-label>Category</mat-label>
            <input
              matInput
              formControlName="category"
              placeholder="Enter category name"
            />
            <mat-icon matSuffix>label</mat-icon>
            <mat-error *ngIf="category?.hasError('required')">
              Category is required
            </mat-error>
            <mat-error *ngIf="category?.hasError('minlength')">
              Category must be at least 2 characters
            </mat-error>
          </mat-form-field>

          <mat-form-field color="accent" appearance="outline">
            <mat-label>SubCategory</mat-label>
            <input
              matInput
              formControlName="subCategory"
              placeholder="Enter subcategory"
            />
            <mat-icon matSuffix>subdirectory_arrow_right</mat-icon>
            <mat-error *ngIf="subCategory?.hasError('required')">
              Subcategory is required
            </mat-error>
            <mat-error *ngIf="subCategory?.hasError('minlength')">
              Subcategory must be at least 2 characters
            </mat-error>
          </mat-form-field>
        </div>

        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="newCategory.invalid"
          class="action-button"
        >
          <mat-icon>add_circle</mat-icon>
          Add Category
        </button>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Add New Book Card -->
  <mat-card class="maintenance-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>menu_book</mat-icon>
        Add New Book
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="newBook" (ngSubmit)="addNewBook()">
        <div class="form-row">
          <mat-form-field
            color="accent"
            appearance="outline"
            class="book-title"
          >
            <mat-label>Book Title</mat-label>
            <input
              matInput
              formControlName="title"
              placeholder="Enter book title"
            />
            <mat-icon matSuffix>title</mat-icon>
            <mat-error *ngIf="title?.hasError('required')">
              Book title is required
            </mat-error>
            <mat-error *ngIf="title?.hasError('minlength')">
              Title must be at least 2 characters
            </mat-error>
          </mat-form-field>

          <mat-form-field
            color="accent"
            appearance="outline"
            class="book-author"
          >
            <mat-label>Book Author</mat-label>
            <input
              matInput
              formControlName="author"
              placeholder="Enter author name"
            />
            <mat-icon matSuffix>person</mat-icon>
            <mat-error *ngIf="author?.hasError('required')">
              Author is required
            </mat-error>
            <mat-error *ngIf="author?.hasError('minlength')">
              Author name must be at least 2 characters
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field
            color="accent"
            appearance="outline"
            class="book-price"
          >
            <mat-label>Book Price(KSH)</mat-label>
            <input
              matInput
              formControlName="price"
              type="number"
              min="0"
              placeholder="0"
            />
            <mat-icon matSuffix>attach_money</mat-icon>
            <mat-error *ngIf="price?.hasError('required')">
              Price is required
            </mat-error>
            <mat-error *ngIf="price?.hasError('min')">
              Price must be positive
            </mat-error>
          </mat-form-field>

          <mat-form-field
            color="accent"
            appearance="outline"
            class="category-select"
          >
            <mat-label>Category</mat-label>
            <mat-select formControlName="category">
              <mat-option value="-1" disabled> Select a category </mat-option>
              <mat-option
                *ngFor="let option of categoryOptions; trackBy: trackByCategory"
                [value]="option.value"
              >
                {{ option.displayValue | titlecase }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>category</mat-icon>
            <mat-error *ngIf="categorySelect?.hasError('required')">
              Category is required
            </mat-error>
            <mat-error *ngIf="categorySelect?.hasError('min')">
              Please select a valid category
            </mat-error>
          </mat-form-field>
        </div>

        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="newBook.invalid || loading"
          class="action-button"
        >
          <mat-spinner
            diameter="20"
            *ngIf="loading"
            class="button-spinner"
          ></mat-spinner>
          <mat-icon *ngIf="!loading">add</mat-icon>
          {{ loading ? "Adding Book..." : "Add Book" }}
        </button>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Delete Book Card -->
  <mat-card class="maintenance-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>delete</mat-icon>
        Delete Existing Book
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="form-row">
        <mat-form-field
          color="accent"
          appearance="outline"
          class="delete-field"
        >
          <mat-label>Book ID</mat-label>
          <input
            matInput
            [formControl]="deleteBook"
            placeholder="Enter book ID to delete"
          />
          <mat-icon matSuffix>numbers</mat-icon>
          <mat-error *ngIf="deleteBook.hasError('required')">
            Book ID is required
          </mat-error>
          <mat-error *ngIf="deleteBook.hasError('pattern')">
            Please enter a valid numeric ID
          </mat-error>
        </mat-form-field>
      </div>

      <button
        mat-raised-button
        color="warn"
        [disabled]="deleteBook.invalid"
        (click)="deleteExistingBook()"
        class="action-button delete-button"
      >
        <mat-icon>delete_forever</mat-icon>
        Delete Book
      </button>
    </mat-card-content>
  </mat-card>
</div>
